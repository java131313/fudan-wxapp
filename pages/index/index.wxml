<import src='/wxapp/template/topLoading/topLoading.wxml' />
<wxs src='../../wxapp/wxs/filter.wxs' module='filter' />

<view class='main-wrapper' style='background:{{bgColor}}'>
  <view class='newsHeader'>
    <view data-num="1" class='newsTitle_parent' bindtap="menuClick">
      <text class='newsTitle {{menuType == 1 ? "newsTitle_click" : ""}}'>我的复旦</text>
      <view class='newsTitle_border {{menuType == 1 ? "newsTitle_border_click" : ""}}'></view>
    </view>
    <view data-num="2" class='newsTitle_parent' bindtap="menuClick">
      <text class='newsTitle {{menuType == 2 ? "newsTitle_click" : ""}}'>本周热榜</text>
      <view class='newsTitle_border {{menuType == 2 ? "newsTitle_border_click" : ""}}'></view>
    </view>

    <view class='search'>
      <input class='searchBtn' type='text' placeholder-class="btnClass" placeholder='学院 / 活动 / 课程...' bindfocus='search'>
      <image src='{{filter.imageSrcParse("/images/search.png")}}'></image>
      </input>
    </view>
  </view>
  <scroll-view scroll-y='true' class='news-box'>
    <template is='topLoading' data='{{isLoading}}'></template>
    <!-- 我的复旦 -->
    <block wx:if='{{menuType == 1}}' wx:for='{{newsItem}}' wx:key='this'>
      <!-- 新闻 -->
      <news-bar wx:if='{{item.type=="news"}}' news_url='{{newsDetailUrl}}?id={{item.data.id}}' news_type='{{filter.handleNewsType(item.data.cover_img,item.data.img_size)}}' news_pic='{{item.data.cover_img}}' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}'
        synopsis_source='{{item.data.origin}}' />

      <!-- 活动 -->
      <news-bar wx:if='{{item.type=="activity"}}' news_url='{{activityUrl}}?id={{item.data.id}}' news_type='4' news_pic='{{item.data.cover_img}}' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}' synopsis_source='{{item.data.source}}'
        activity_time='{{item.data.begintime}}' activity_site='{{item.data.site}}' />

      <!-- 视频 -->

      <!-- 投票 -->
      <news-bar wx:if='{{item.type=="vote"}}' news_url='{{voteUrl}}?id={{item.data.id}}' news_type='6' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}' synopsis_source='{{item.data.source}}' vote_options='{{item.data.options}}'
      />

      <!-- 招聘 -->
      <news-bar wx:if='{{item.type=="recruit"}}' news_url='{{recruitUrl}}?id={{item.data.id}}' news_type='7' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}' synopsis_source='{{item.data.source}}' recruit_target='{{item.data.target}}'
        recruit_require='{{item.data.require}}' />

      <!-- 征稿 -->

    </block>

    <!-- 本周热榜 -->
    <block wx:if='{{menuType == 2}}' wx:for='{{weekRank}}' wx:key='this'>
      <!-- 新闻 -->
      <news-bar wx:if='{{item.type=="news"}}' news_url='{{newsDetailUrl}}?id={{item.data.id}}' news_type='{{filter.handleNewsType(item.data.cover_img,item.data.img_size)}}' news_pic='{{item.data.cover_img}}' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}'
        synopsis_source='{{item.data.origin}}' />

      <!-- 活动 -->
      <news-bar wx:if='{{item.type=="activity"}}' news_url='{{activityUrl}}?id={{item.data.id}}' news_type='4' news_pic='{{item.data.cover_img}}' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}' synopsis_source='{{item.data.source}}'
        activity_time='{{item.data.begintime}}' activity_site='{{item.data.site}}' />

      <!-- 视频 -->

      <!-- 投票 -->
      <news-bar wx:if='{{item.type=="vote"}}' news_url='{{voteUrl}}?id={{item.data.id}}' news_type='6' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}' synopsis_source='{{item.data.source}}' vote_options='{{item.data.options}}'
      />

      <!-- 招聘 -->
      <news-bar wx:if='{{item.type=="recruit"}}' news_url='{{recruitUrl}}?id={{item.data.id}}' news_type='7' news_title='{{item.data.title}}' synopsis_time='{{filter.formatDate(item.data.issuetime)}}' synopsis_source='{{item.data.source}}' recruit_target='{{item.data.target}}'
        recruit_require='{{item.data.require}}' />

      <!-- 征稿 -->

    </block>
  </scroll-view>
</view>